<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asset Library | KYNAR</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
  <script type="module" src="ui-core.js"></script>
</head>
<body>

  <header class="app-header" id="global-header"></header>

  <main class="container">
    
    <div class="text-center" style="padding: 60px 0 40px;">
      <span class="tag-pill mb-lg">Status: Unrestricted Access</span>
      <h1 class="heading-lg text-upper">The Archive</h1>
      
      <div class="filter-bar mt-lg" id="filter-controls">
        <button class="filter-chip active" data-filter="all">All Systems</button>
        <button class="filter-chip" data-filter="business">Business</button>
        <button class="filter-chip" data-filter="personal">Personal</button>
        <button class="filter-chip" data-filter="creative">Creative</button>
      </div>
    </div>

    <div class="category-grid" id="library-grid">
      </div>

  </main>

  <footer id="global-footer"></footer>

  <script type="module">
    import { vault } from './vault.js'; // Imports your data

    const grid = document.getElementById('library-grid');
    const filters = document.querySelectorAll('.filter-chip');

    // FUNCTION: Generate HTML for a Card
    function renderVault(filterType) {
      grid.innerHTML = ''; // Clear current grid

      vault.forEach(item => {
        // Filter Logic
        if (filterType !== 'all' && item.category !== filterType) return;

        // Visual Logic: Is it a System or a Tool?
        const isSystem = item.type === 'system';
        const badgeColor = isSystem ? 'var(--color-accent)' : 'var(--color-border)';
        const badgeText = isSystem ? 'SYSTEM' : 'TOOL';

        // HTML Construction
        const cardHTML = `
          <article class="product-card ${isSystem ? 'highlight-border' : ''}">
            
            <div class="product-card__image-box">
              ${item.image ? `<img src="${item.image}" alt="${item.title}">` : `<span style="font-size:3rem; opacity:0.2;">${item.title[0]}</span>`}
              <span class="tag-pill" style="position: absolute; top: 15px; left: 15px; border-color: ${badgeColor}; background: var(--color-bg-card);">
                ${badgeText}
              </span>
            </div>

            <div class="product-card__body">
              <h3 class="product-card__title">${item.title}</h3>
              <p class="product-card__short-desc">${item.objective}</p>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 20px; padding: 10px; background: rgba(0,0,0,0.02); border-radius: 8px;">
                <div class="text-xs text-faded text-upper">Time: <span style="color: var(--color-text-main);">${item.specs.deploy_time}</span></div>
                <div class="text-xs text-faded text-upper">Level: <span style="color: var(--color-text-main);">${item.specs.skill_level}</span></div>
              </div>

              <div class="product-card__actions mt-auto">
                <span class="product-card__price">${item.price}</span>
                <a href="${item.link}" class="btn btn--outline btn--sm w-full">Inspect</a>
              </div>
            </div>
          </article>
        `;
        
        grid.innerHTML += cardHTML;
      });
    }

    // INITIAL LOAD
    renderVault('all');

    // FILTER CLICK EVENTS
    filters.forEach(btn => {
      btn.addEventListener('click', (e) => {
        // Remove active class from all
        filters.forEach(f => f.classList.remove('active'));
        // Add to clicked
        e.target.classList.add('active');
        // Render new category
        renderVault(e.target.dataset.filter);
      });
    });
  </script>

</body>
</html>
