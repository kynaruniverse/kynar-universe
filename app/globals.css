@tailwind base;
@tailwind components;
@tailwind utilities;

/*--------------------------------------------------------------
# Base Layer: Global Variables & Core Styles
--------------------------------------------------------------*/
@layer base {
  :root {
    /* Color Palette */
    --canvas: 40 12% 97%;
    --surface: 210 20% 98%;
    --border: 214 32% 91%;
    --kyn-green: 142 71% 45%;
    --kyn-caramel: 38 48% 39%;
    --kyn-slate: 215 25% 15%;
    --text-primary: 215 25% 7%;
    --text-secondary: 215 16% 47%;

    /* Safe Zones for Mobile Devices */
    --safe-bottom: env(safe-area-inset-bottom, 1.5rem);
    --safe-top: env(safe-area-inset-top, 0px);

    /* Easing Preset: "The Drift" */
    --ease-kyn-out: cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Reset & Global Defaults */
  * {
    @apply border-border;
    -webkit-tap-highlight-color: transparent; /* Removes mobile tap highlight */
  }

  html,
  body {
    @apply bg-canvas text-text-primary;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    line-height: 1.6;
    overflow-x: hidden;
    width: 100%;
    position: relative;
    min-height: 100svh;
    scroll-behavior: smooth;
  }

  /* Selection Highlight */
  ::selection {
    background-color: hsl(var(--kyn-green) / 0.15);
    color: inherit;
  }
}

/*--------------------------------------------------------------
# Components Layer: Reusable Utility Classes
--------------------------------------------------------------*/
@layer components {
  /* Portal Backdrop: High-end blur effect for overlays/modals */
  .portal-backdrop {
    @apply fixed inset-0 z-[190] backdrop-blur-md;
    background-color: hsl(var(--kyn-slate) / 0.4); /* Safe override */
    transition: backdrop-filter 0.5s var(--ease-kyn-out),
                background-color 0.5s var(--ease-kyn-out);
  }

  /* Glassmorphism Surface */
  .kynar-glass {
    @apply bg-white/70 backdrop-blur-xl border border-white/20 shadow-kynar-soft;
  }

  /* Smooth Universal Transition */
  .calm-transition {
    transition: all 0.6s var(--ease-kyn-out);
    will-change: transform, opacity, filter;
  }

  /* Card Component */
  .kynar-card {
    @apply calm-transition rounded-kynar-lg border border-border bg-surface hover:shadow-kynar-soft;
  }

  /* Safe-zone Padding Utilities */
  .pt-safe-top { padding-top: var(--safe-top); }
  .pb-safe-bottom { padding-bottom: var(--safe-bottom); }
}